{% extends "base.html" %}

{% block content %}
<div class="content-section">
    <h1 class="text-center mb-4">To-Do List</h1>
    {% if current_user.is_authenticated %}
    <form action="{{ url_for('views.add') }}" method="post" class="mb-4">
        <div class="input-group">
            <input type="text" name="todo" class="form-control" placeholder="Enter a new todo" required>
            <button class="btn btn-primary" type="submit">Add</button>
        </div>
    </form>
    <ul class="list-group list-group-flush">
        {% for todo in todos %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
            <span class="{{ 'text-decoration-line-through' if todo.complete else '' }}">{{ todo.text }}</span>
            <div>
                <form action="{{ url_for('views.complete', todo_id=todo.id) }}" method="post" class="d-inline">
                    <button type="submit"
                        class="btn btn-sm {{ 'btn-outline-warning' if todo.complete else 'btn-outline-success' }} me-2">
                        {{ 'Undo' if todo.complete else 'Complete' }}
                    </button>
                </form>
                <a href="{{ url_for('views.edit', todo_id=todo.id) }}"
                    class="btn btn-sm btn-outline-secondary me-2">Edit</a>
                <a href="{{ url_for('views.delete', todo_id=todo.id) }}"
                    class="btn btn-sm btn-outline-danger">Delete</a>
            </div>
        </li>
        {% else %}
        <li class="list-group-item text-muted">No to-do items yet.</li>
        {% endfor %}
    </ul>
    {% else %}
    <div class="alert alert-primary text-center" role="alert">
        Please <a href="{{ url_for('auth.login') }}" class="alert-link">log in</a> or <a
            href="{{ url_for('auth.register') }}" class="alert-link">register</a> to see your to-do list.
    </div>
    {% endif %}
</div>
{% endblock %}